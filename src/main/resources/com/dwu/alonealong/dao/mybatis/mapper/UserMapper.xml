<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.jpetstore.dao.mybatis.mapper.AccountMapper">
  <cache />

  <select id="getUserByUserId" resultType="User">
    SELECT USER_ID, 
         PW, 
         NAME, 
         NICKNAME, 
         EMAIL, 
         PHONE, 
         SEX, 
         BIRTHDAY, 
         ADDRESS, 
         ZIP, 
         REGISTERDATE,
         BUISNESS_NUM
    FROM USER
    WHERE USER_ID = #{user_id}
  </select>

  <select id="getUserByUserIdAndPassword" resultType="User">
  SELECT USER_ID, 
         PW, 
         NAME, 
         NICKNAME, 
         EMAIL, 
         PHONE, 
         SEX, 
         BIRTHDAY, 
         ADDRESS, 
         ZIP, 
         REGISTERDATE,
         BUISNESS_NUM
    FROM USER
    WHERE USER_ID = #{user_id}
      AND PW = #{param2}
  </select>

  <select id="getUserIdList" resultType="java.lang.String">
    SELECT USERID AS VALUE FROM USER
  </select>

  <update id="updateUser" parameterType="User">
    UPDATE ACCOUNT SET
      PW = #{password},
      NAME = #{name},
      NICKNAME = #{nickname},
      EMAIL = #{email},
      PHONE = #{phone},
      SEX = #{sex},
      BIRTHDAY = #{birthday},
      ADDRESS = #{address},
      ZIP = #{zip}
    WHERE USERID = #{user_id}
  </update>

  <insert id="createUser" parameterType="User">
    INSERT INTO USER
      (USER_ID, PW, NAME, NICKNAME, EMAIL, PHONE, SEX, BIRTHDAY, ADDRESS, ZIP, REGISTERDATE)
    VALUES
      (#{user_id}, #{password}, #{name}, #{nickname}, #{email}, #{phone}, #{sex}, #{birthday}, #{address}, #{zip}, #{registerDate})
  </insert>
  
   <delete id="removeUser" parameterType="User">
    DELETE FROM USER
    WHERE USER_ID = #{user_id}
   </delete>
  
	
  <!--  
  TODO MyBatis 3 does not map booleans to integers
  <update id="updateProfile" parameterType="Account">
    UPDATE PROFILE SET
      LANGPREF = #{languagePreference},
      FAVCATEGORY = #{favouriteCategoryId},
      MYLISTOPT = #{listOption},
      BANNEROPT = #{bannerOption}
    WHERE USERID = #{username}
  </update>
  -->
  
  <!--  
  TODO MyBatis 3 does not map booleans to integers
  <insert id="insertProfile" parameterType="Account">
    INSERT INTO PROFILE (LANGPREF, FAVCATEGORY, MYLISTOPT, BANNEROPT, USERID)
    VALUES (#{languagePreference}, #{favouriteCategoryId}, #{listOption}, #{bannerOption}, #{username})
  </insert>
  -->

</mapper>